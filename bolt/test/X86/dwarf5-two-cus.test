// Check that BOLT correctly handles two CUs with DWARF-5 debug info (does not crash).

// REQUIRES: system-linux

// RUN: %clang -g -gdwarf-5 -O1 -xc++ %s -o %t-main.o -c
// RUN: %clang -g -gdwarf-5 -O1 -xc++ %S/Inputs/dwarf5-two-cus-foo.cpp -o %t-foo.o -c
// RUN: %clang %t-main.o %t-foo.o -o %t.exe
// RUN: llvm-bolt %t.exe --update-debug-sections --force-inline=foo \
// RUN:   -o %t.bolt | FileCheck %s

// CHECK-NOT: BOLT-ERROR
// CHECK-NOT: BOLT-WARNING
// CHECK: BOLT-INFO: inlined {{[0-9]+}} calls at {{[1-9][0-9]*}} call sites

extern "C" void foo();

int main() {
  foo();
  return 0;
}
